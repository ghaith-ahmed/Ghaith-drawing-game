<template>
  <div
    class="flex gap-2 justify-between items-center px-3 py-6 mx-3 text-gray-700"
  >
    <div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        data-name="Layer 1"
        viewBox="0 0 32 32"
        id="brush"
        class="w-12"
        v-if="active"
      >
        <path
          fill="#f5bdaf"
          d="M5.332,29.5,2.5,26.668a2,2,0,0,1,0-2.83l18.39-18.39,5.97-2.29,3.22-1.24-1.24,3.23-2.29,5.96L8.162,29.5A2,2,0,0,1,5.332,29.5Z"
        ></path>
        <polygon
          fill="#57565e"
          points="6.122 20.218 7.532 21.638 10.362 24.468 11.782 25.878 10.282 27.368 8.872 25.958 6.042 23.128 4.632 21.718 6.122 20.218"
        ></polygon>
        <path
          fill="#ed4569"
          d="M5.332,29.5,2.5,26.668a2,2,0,0,1,0-2.83l2.13-2.12,1.41,1.41,2.83,2.83,1.41,1.41L8.162,29.5A2,2,0,0,1,5.332,29.5Z"
        ></path>
        <path
          fill="#e13442"
          d="M11.782 25.878l-1.42-1.41L23.132 11.7a2.006 2.006 0 0 1 1.42-.59h2zM7.532 21.638L6.1 20.241 20.892 5.448v2a2.006 2.006 0 0 1-.59 1.42z"
        ></path>
        <path
          fill="#e0e0e2"
          d="M3.688,23.812h4a2,2,0,0,1,2,2v3a0,0,0,0,1,0,0h-8a0,0,0,0,1,0,0v-3a2,2,0,0,1,2-2Z"
          transform="rotate(-135 5.688 26.312)"
        ></path>
        <path
          fill="#57565e"
          d="M28.842,5.148h-.01a3.191,3.191,0,0,1-1.97-1.99l3.22-1.24Z"
        ></path>
        <path
          fill="#ed4569"
          d="M10.362,24.468,23.132,11.7a2.006,2.006,0,0,0,.59-1.42v-1a1,1,0,0,0-1-1h-1a2.006,2.006,0,0,0-1.42.59L7.532,21.638Z"
        ></path>
        <path
          d="M30.437,1.563A.5.5,0,0,0,29.9,1.45L20.711,4.985l-.007,0a.5.5,0,0,0-.167.109L5.777,19.859l-.009.006-.006.009-3.61,3.61a2.5,2.5,0,0,0,0,3.536l2.829,2.829a2.5,2.5,0,0,0,3.536,0l3.61-3.61.009-.006.006-.009L26.9,11.463a.5.5,0,0,0,.109-.168l0-.007L30.55,2.1A.5.5,0,0,0,30.437,1.563ZM20.658,9.219a1.5,1.5,0,0,1,1.064-.441h1a.5.5,0,0,1,.5.5v1a1.5,1.5,0,0,1-.443,1.066L10.367,23.756,8.244,21.633Zm-.267-2.561v.791a1.489,1.489,0,0,1-.439,1.062L7.537,20.926,6.83,20.22ZM7.81,29.141a1.5,1.5,0,0,1-2.122,0L2.859,26.312a1.5,1.5,0,0,1,0-2.122l1.768-1.768,4.95,4.95Zm2.475-2.475-4.95-4.95.789-.789,1.036,1.036c.008.009.011.02.019.029s.02.011.029.019l2.782,2.782c.008.009.011.02.019.029s.02.011.029.019l1.036,1.036Zm1.5-1.5-.707-.707L23.49,12.048a1.487,1.487,0,0,1,1.061-.439h.791ZM26.2,10.609H24.551a2.515,2.515,0,0,0-.365.036,2.511,2.511,0,0,0,.036-.366v-1a1.5,1.5,0,0,0-1.5-1.5h-1a2.51,2.51,0,0,0-.366.036,2.515,2.515,0,0,0,.036-.365V5.8l5.22-2.007a3.654,3.654,0,0,0,1.6,1.607Zm2.363-6.145A2.662,2.662,0,0,1,27.54,3.431l1.673-.643Z"
        ></path>
        <path
          fill="#bc9a7e"
          d="M29.73,30.6c-1.18,1.18-6.36-2.08-11.56-7.28-1.22-1.22-2.33-2.43-3.3-3.6-3.18-3.8-4.88-7.05-3.98-7.95s4.17.8,7.99,4c1.16.96,2.36,2.06,3.57,3.27C27.65,24.239,30.91,29.419,29.73,30.6Z"
        ></path>
        <path
          fill="#afaeb3"
          d="M18.88,15.769l-.02.02s-2.14,3.23-3.94,3.94a.175.175,0,0,1-.05-.01c-3.18-3.8-4.88-7.05-3.98-7.95S15.06,12.569,18.88,15.769Z"
        ></path>
        <path
          fill="#f8a839"
          d="M12.916,11.819c.582-2.12-.856-5.058-2.5-6.154a5.342,5.342,0,0,0-2.4-.857,25.718,25.718,0,0,1-2.92-.19c-1.47-.34-3.15-1.8-2.82-3.46a14,14,0,0,0,.44,6.89,9.159,9.159,0,0,0,6,5.739C10.437,14.269,12.4,13.687,12.916,11.819Z"
        ></path>
        <path
          d="M22.8,18.687c-3.414-3.413-6.935-6.1-9.338-7.166A7.028,7.028,0,0,0,10.691,5.25a5.82,5.82,0,0,0-2.625-.938,12.034,12.034,0,0,0-1.253-.054A7.38,7.38,0,0,1,5.2,4.131C4,3.854,2.488,2.625,2.76,1.256a.5.5,0,0,0-.98-.2h0a14.534,14.534,0,0,0,.456,7.146A9.608,9.608,0,0,0,8.579,14.27a4.825,4.825,0,0,0,1.3.181,4.343,4.343,0,0,0,.8-.081c1.061,2.4,3.738,5.9,7.142,9.3,3.369,3.369,8.636,7.659,11.222,7.659a1.418,1.418,0,0,0,1.045-.379C31.913,29.125,26.732,22.615,22.8,18.687ZM8.848,13.307A8.7,8.7,0,0,1,3.184,7.89a13.433,13.433,0,0,1-.655-4.279A4.81,4.81,0,0,0,4.977,5.106,8.286,8.286,0,0,0,6.8,5.257a10.918,10.918,0,0,1,1.151.048,4.832,4.832,0,0,1,2.181.776c1.469.978,2.821,3.7,2.3,5.605a2.226,2.226,0,0,1-1.074,1.4A3.366,3.366,0,0,1,8.848,13.307Zm3,.649a3.194,3.194,0,0,0,1.341-1.461,25.1,25.1,0,0,1,5.066,3.4,6.5,6.5,0,0,1-3.234,3.236,24.819,24.819,0,0,1-3.394-5.069C11.7,14.026,11.782,14,11.853,13.956ZM29.376,30.247c-.624.625-4.9-1.329-10.853-7.28C17.5,21.946,16.56,20.921,15.7,19.921a7.515,7.515,0,0,0,3.352-3.353c1,.862,2.026,1.806,3.047,2.826C28.049,25.346,30,29.623,29.376,30.247Z"
        ></path>
      </svg>
    </div>
    <div class="flex gap-3 justify-end items-center">
      <div class="flex flex-col items-end text-2xl">
        <h1 class="font-bold">
          {{ member.user._id == user._id ? "( You ) " : "" }}
          {{ member.user.name ?? user.name }}
        </h1>
        <div class="flex text-lg font-bold gap-1 text-blue-700">
          <transition
            enter-from-class="opacity-0"
            enter-active-class="transition duration-500"
            enter-to-class="opacity-100"
            leave-from-class="opacity-100"
            leave-active-class="transition duration-500"
            leave-to-class="opacity-0"
            mode="out-in"
          >
            <div :key="member.score">
              {{ member.score }}
            </div>
          </transition>
          pts
        </div>
      </div>
      <div
        class="w-14 h-14 shrink-0 flex justify-center items-center object-cover bg-amber-600 rounded-full overflow-hidden"
        :class="{
          'outline-4 outline-blue-600 outline border-2': active,
          'outline-4 outline-red-600 outline border-2': leaved,
        }"
        alt=""
      >
        <h1 class="text-sm px-2 text-white truncate">
          {{ member.user.name ?? user.name }}
        </h1>
      </div>
    </div>
  </div>
</template>

<script setup>
import { useUserStore } from "@/stores/userStore";
import { inject, ref } from "vue";

const party = inject("party");
const { user } = useUserStore();
defineProps(["member", "active", "leaved"]);
const counter = ref(0);
const emit = defineEmits(["confetti"]);
</script>
